/*

 FullCalendar ResourceViews version 1.5.3.3
 http://tux.fi/~jarnok/fullcalendar-resourceviews/
 http://arshaw.com/fullcalendar/

 Use fullcalendar.css for basic styling.
 For event drag & drop, requires jQuery UI draggable.
 For event resizing, requires jQuery UI resizable.

 Copyright (c) 2012 Jarno Kurlin
 Copyright (c) 2011 Adam Shaw
 Dual licensed under the MIT and GPL licenses, located in
 MIT-LICENSE.txt and GPL-LICENSE.txt respectively.

 Date: Sun Nov 4 18:01:02 2012 +0200

*/
(function(t,va){function ob(a){t.extend(true,eb,a)}function $b(a,c,e){function d(x){if(R){A();w();na();J(x)}else g()}function g(){B=c.theme?"ui":"fc";a.addClass("fc");c.isRTL&&a.addClass("fc-rtl");c.theme&&a.addClass("ui-widget");R=t("<div class='fc-content' style='position:relative'/>").prependTo(a);G=new ac(da,c);(E=G.render())&&a.prepend(E);o(c.defaultView);t(window).resize(oa);j()||n()}function n(){setTimeout(function(){!l.start&&j()&&J()},0)}function i(){t(window).unbind("resize",oa);G.destroy();
R.remove();a.removeClass("fc fc-rtl ui-widget")}function h(){return u.offsetWidth!==0}function j(){return t("body")[0].offsetWidth!==0}function o(x){if(!l||x!=l.name){F++;Y();var N=l,ja;if(N){(N.beforeHide||Hb)();Xa(R,R.height());N.element.hide()}else Xa(R,1);R.css("overflow","hidden");if(l=k[x])l.element.show();else l=k[x]=new Fa[x](ja=D=t("<div class='fc-view fc-view-"+x+"' style='position:absolute'/>").appendTo(R),da);N&&G.deactivateButton(N.name);G.activateButton(x);J();R.css("overflow","");N&&
Xa(R,1);ja||(l.afterShow||Hb)();F--}}function J(x){if(h()){F++;Y();z===va&&A();var N=false;if(!l.start||x||L<l.start||L>=l.end){l.render(L,x||0);fa(true);N=true}else if(l.sizeDirty){l.clearEvents();fa();N=true}else if(l.eventsDirty){l.clearEvents();N=true}l.sizeDirty=false;l.eventsDirty=false;ra(N);m=a.outerWidth();G.updateTitle(l.title);x=new Date;x>=l.start&&x<l.end?G.disableButton("today"):G.enableButton("today");F--;l.trigger("viewDisplay",u)}}function V(){w();if(h()){A();fa();Y();l.clearEvents();
l.renderEvents($);l.sizeDirty=false}}function w(){t.each(k,function(x,N){N.sizeDirty=true})}function A(){z=c.contentHeight?c.contentHeight:c.height?c.height-(E?E.height():0)-Qa(R):Math.round(R.width()/Math.max(c.aspectRatio,0.5))}function fa(x){F++;l.setHeight(z,x);if(D){D.css("position","relative");D=null}l.setWidth(R.width(),x);F--}function oa(){if(!F)if(l.start){var x=++v;setTimeout(function(){if(x==v&&!F&&h())if(m!=(m=a.outerWidth())){F++;V();l.trigger("windowResize",u);F--}},200)}else n()}function ra(x){if(!c.lazyFetching||
K(l.visStart,l.visEnd)){wa();c.refetchResources&&sa()}else x&&ea()}function wa(){ba(l.visStart,l.visEnd)}function sa(){ia(false,l);k=[];l.element.remove();l=k[l.name]=new Fa[l.name](D=t("<div class='fc-view fc-view-"+l.name+"' style='position:absolute'/>").appendTo(R),da);J()}function ka(x){$=x;ea()}function ha(x){ea(x)}function ea(x){na();if(h()){l.clearEvents();l.renderEvents($,x);l.eventsDirty=false}}function na(){t.each(k,function(x,N){N.eventsDirty=true})}function ta(x,N,ja){l.select(x,N,ja===
va?true:ja)}function Y(){l&&l.unselect()}function ga(){J(-1)}function pa(){J(1)}function ua(){pb(L,-1);J()}function X(){pb(L,1);J()}function C(){L=new Date;J()}function s(x,N,ja){if(x instanceof Date)L=p(x);else Ib(L,x,N,ja);J()}function b(x,N,ja){x!==va&&pb(L,x);N!==va&&Ya(L,N);ja!==va&&O(L,ja);J()}function H(){return p(L)}function M(){return l}function T(x,N){if(N===va)return c[x];if(x=="height"||x=="contentHeight"||x=="aspectRatio"){c[x]=N;V()}}function la(x,N){if(c[x])return c[x].apply(N||u,Array.prototype.slice.call(arguments,
2))}var da=this;da.options=c;da.render=d;da.destroy=i;da.refetchEvents=wa;da.reportEvents=ka;da.refetchResources=sa;da.reportEventChange=ha;da.rerenderEvents=ea;da.changeView=o;da.select=ta;da.unselect=Y;da.prev=ga;da.next=pa;da.prevYear=ua;da.nextYear=X;da.today=C;da.gotoDate=s;da.incrementDate=b;da.formatDate=function(x,N){return Ra(x,N,c)};da.formatDates=function(x,N,ja){return qb(x,N,ja,c)};da.getDate=H;da.getView=M;da.option=T;da.trigger=la;bc.call(da,c,e);var K=da.isFetchNeeded,ba=da.fetchEvents;
cc.call(da,c);var ia=da.fetchResources,u=a[0],G,E,R,B,l,k={},m,z,D,v=0,F=0,L=new Date,$=[],U;Ib(L,c.year,c.month,c.date);c.droppable&&t(document).bind("dragstart",function(x,N){var ja=x.target,qa=t(ja);if(!qa.parents(".fc").length){var ca=c.dropAccept;if(t.isFunction(ca)?ca.call(ja,qa):qa.is(ca)){U=ja;l.dragStart(U,x,N)}}}).bind("dragstop",function(x,N){if(U){l.dragStop(U,x,N);U=null}})}function ac(a,c){function e(){w=c.theme?"ui":"fc";if(c.header)return V=t("<table class='fc-header' style='width:100%'/>").append(t("<tr/>").append(g("left")).append(g("center")).append(g("right")))}
function d(){V.remove()}function g(A){var fa=t("<td class='fc-header-"+A+"'/>");(A=c.header[A])&&t.each(A.split(" "),function(oa){oa>0&&fa.append("<span class='fc-header-space'/>");var ra;t.each(this.split(","),function(wa,sa){if(sa=="title"){fa.append("<span class='fc-header-title'><h2>&nbsp;</h2></span>");ra&&ra.addClass(w+"-corner-right");ra=null}else{var ka;if(a[sa])ka=a[sa];else if(Fa[sa])ka=function(){ea.removeClass(w+"-state-hover");a.changeView(sa)};if(ka){wa=c.theme?rb(c.buttonIcons,sa):
null;var ha=rb(c.buttonText,sa),ea=t("<span class='fc-button fc-button-"+sa+" "+w+"-state-default'><span class='fc-button-inner'><span class='fc-button-content'>"+(wa?"<span class='fc-icon-wrap'><span class='ui-icon ui-icon-"+wa+"'/></span>":ha)+"</span><span class='fc-button-effect'><span></span></span></span></span>");if(ea){ea.click(function(){ea.hasClass(w+"-state-disabled")||ka()}).mousedown(function(){ea.not("."+w+"-state-active").not("."+w+"-state-disabled").addClass(w+"-state-down")}).mouseup(function(){ea.removeClass(w+
"-state-down")}).hover(function(){ea.not("."+w+"-state-active").not("."+w+"-state-disabled").addClass(w+"-state-hover")},function(){ea.removeClass(w+"-state-hover").removeClass(w+"-state-down")}).appendTo(fa);ra||ea.addClass(w+"-corner-left");ra=ea}}}});ra&&ra.addClass(w+"-corner-right")});return fa}function n(A){V.find("h2").html(A)}function i(A){V.find("span.fc-button-"+A).addClass(w+"-state-active")}function h(A){V.find("span.fc-button-"+A).removeClass(w+"-state-active")}function j(A){V.find("span.fc-button-"+
A).addClass(w+"-state-disabled")}function o(A){V.find("span.fc-button-"+A).removeClass(w+"-state-disabled")}var J=this;J.render=e;J.destroy=d;J.updateTitle=n;J.activateButton=i;J.deactivateButton=h;J.disableButton=j;J.enableButton=o;var V=t([]),w}function bc(a,c){function e(b,H){return!ga||b<ga||H>pa}function d(b,H){ga=b;pa=H;s=[];b=++ua;X=H=Y.length;for(var M=0;M<H;M++)g(Y[M],b)}function g(b,H){n(b,function(M){if(H==ua){if(M){for(var T=0;T<M.length;T++){M[T].source=b;oa(M[T])}s=s.concat(M)}X--;X||
na(s)}})}function n(b,H){var M,T=Da.sourceFetchers,la;for(M=0;M<T.length;M++){la=T[M](b,ga,pa,H);if(la===true)return;else if(typeof la=="object"){n(la,H);return}}if(M=b.events)if(t.isFunction(M)){A();M(p(ga),p(pa),function(ia){H(ia);fa()})}else t.isArray(M)?H(M):H();else if(b.url){var da=b.success,K=b.error,ba=b.complete;M=t.extend({},b.data||{});T=Za(b.startParam,a.startParam);la=Za(b.endParam,a.endParam);if(T)M[T]=Math.round(+ga/1E3);if(la)M[la]=Math.round(+pa/1E3);A();t.ajax(t.extend({},dc,b,{data:M,
success:function(ia){ia=ia||[];var u=fb(da,this,arguments);if(t.isArray(u))ia=u;H(ia)},error:function(){fb(K,this,arguments);H()},complete:function(){fb(ba,this,arguments);fa()}}))}else H()}function i(b){if(b=h(b)){X++;g(b,ua)}}function h(b){if(t.isFunction(b)||t.isArray(b))b={events:b};else if(typeof b=="string")b={url:b};if(typeof b=="object"){ra(b);Y.push(b);return b}}function j(b){Y=t.grep(Y,function(H){return!wa(H,b)});s=t.grep(s,function(H){return!wa(H.source,b)});na(s)}function o(b){var H,
M=s.length,T,la=ea().defaultEventEnd,da=b.start-b._start,K=b.end?b.end-(b._end||la(b)):0;for(H=0;H<M;H++){T=s[H];if(T._id==b._id&&T!=b){T.start=new Date(+T.start+da);T.end=b.end?T.end?new Date(+T.end+K):new Date(+la(T)+K):null;T.title=b.title;T.url=b.url;T.allDay=b.allDay;T.className=b.className;T.editable=b.editable;T.color=b.color;T.backgroudColor=b.backgroudColor;T.borderColor=b.borderColor;T.textColor=b.textColor;oa(T)}}oa(b);na(s)}function J(b,H){oa(b);if(!b.source){if(H){ta.events.push(b);b.source=
ta}s.push(b)}na(s)}function V(b){if(b){if(!t.isFunction(b)){var H=b+"";b=function(T){return T._id==H}}s=t.grep(s,b,true);for(M=0;M<Y.length;M++)if(t.isArray(Y[M].events))Y[M].events=t.grep(Y[M].events,b,true)}else{s=[];for(var M=0;M<Y.length;M++)if(t.isArray(Y[M].events))Y[M].events=[]}na(s)}function w(b){if(t.isFunction(b))return t.grep(s,b);else if(b){b+="";return t.grep(s,function(H){return H._id==b})}return s}function A(){C++||ha("loading",null,true,ea())}function fa(){--C||ha("loading",null,
false,ea())}function oa(b){var H=b.source||{},M=Za(H.ignoreTimezone,a.ignoreTimezone);b._id=b._id||(b.id===va?"_fc"+ec++:b.id+"");if(b.date){if(!b.start)b.start=b.date;delete b.date}b._start=p(b.start=sb(b.start,M));b.end=sb(b.end,M);if(b.end&&b.end<=b.start)b.end=null;b._end=b.end?p(b.end):null;if(b.allDay===va)b.allDay=Za(H.allDayDefault,a.allDayDefault);if(b.className){if(typeof b.className=="string")b.className=b.className.split(/\s+/)}else b.className=[]}function ra(b){if(b.className){if(typeof b.className==
"string")b.className=b.className.split(/\s+/)}else b.className=[];for(var H=Da.sourceNormalizers,M=0;M<H.length;M++)H[M](b)}function wa(b,H){return b&&H&&sa(b)==sa(H)}function sa(b){return(typeof b=="object"?b.events||b.url:"")||b}var ka=this;ka.isFetchNeeded=e;ka.fetchEvents=d;ka.addEventSource=i;ka.removeEventSource=j;ka.updateEvent=o;ka.renderEvent=J;ka.removeEvents=V;ka.clientEvents=w;ka.normalizeEvent=oa;var ha=ka.trigger,ea=ka.getView,na=ka.reportEvents,ta={events:[]},Y=[ta],ga,pa,ua=0,X=0,
C=0,s=[];for(ka=0;ka<c.length;ka++)h(c[ka])}function cc(a){function c(h){var j={};if(t.isFunction(h)){j={resources:h};n.push(j)}else if(typeof h=="string"){j={url:h};n.push(j)}else if(typeof h=="object")for(var o=0;o<h.length;o++){j=h[o];g(j);j={resources:j};n.push(j)}}function e(h,j){h=typeof h!=="undefined"?h:true;if(!(i!=va&&h)){i=[];h=n.length;for(var o=0;o<h;o++){var J=d(n[o],j);i=i.concat(J)}}return i}function d(h,j){var o=h.resources;if(o){if(t.isFunction(o))return o()}else{var J=h.url;if(J){var V=
{};if(typeof j=="object"){var w=a.startParam,A=a.endParam;if(w)V[w]=Math.round(+j.visStart/1E3);if(A)V[A]=Math.round(+j.visEnd/1E3)}t.ajax(t.extend({},h,{data:V,dataType:"json",cache:false,success:function(fa){o=fa=fa||[]},error:function(){alert("ajax error getting json from "+J)},async:false}))}}return o}function g(h){if(h.className){if(typeof h.className=="string")h.className=h.className.split(/\s+/)}else h.className=[];for(var j=Da.sourceNormalizers,o=0;o<j.length;o++)j[o](h)}this.fetchResources=
e;var n=[],i;c(a.resources)}function pb(a,c,e){a.setFullYear(a.getFullYear()+c);e||Ka(a);return a}function Ya(a,c,e){if(+a){c=a.getMonth()+c;var d=p(a);d.setDate(1);d.setMonth(c);a.setMonth(c);for(e||Ka(a);a.getMonth()!=d.getMonth();)a.setDate(a.getDate()+(a<d?1:-1))}return a}function fc(a,c,e){O(a,c*7,e);return a}function O(a,c,e){if(+a){c=a.getDate()+c;var d=p(a);d.setHours(9);d.setDate(c);a.setDate(c);e||Ka(a);tb(a,d)}return a}function tb(a,c){if(+a)for(;a.getDate()!=c.getDate();)a.setTime(+a+
(a<c?1:-1)*gc)}function xa(a,c){a.setMinutes(a.getMinutes()+c);return a}function Ka(a){a.setHours(0);a.setMinutes(0);a.setSeconds(0);a.setMilliseconds(0);return a}function p(a,c){if(c)return Ka(new Date(+a));return new Date(+a)}function Jb(){var a=0,c;do c=new Date(1970,a++,1);while(c.getHours());return c}function Ba(a,c,e){for(c=c||1;!a.getDay()||e&&a.getDay()==1||!e&&a.getDay()==6;)O(a,c);return a}function Ca(a,c){return Math.round((p(a,true)-p(c,true))/ub)}function Ib(a,c,e,d){if(c!==va&&c!=a.getFullYear()){a.setDate(1);
a.setMonth(0);a.setFullYear(c)}if(e!==va&&e!=a.getMonth()){a.setDate(1);a.setMonth(e)}d!==va&&a.setDate(d)}function Kb(a){var c=a.getFullYear(),e=8-(new Date(a.getFullYear(),0,1)).getDay();if(e==8)e=1;a=(Date.UTC(c,a.getMonth(),a.getDate(),0,0,0)-Date.UTC(c,0,1,0,0,0))/1E3/60/60/24+1;e=Math.floor((a-e+7)/7);if(e==0){c--;c=8-(new Date(c,0,1)).getDay();e=c==2||c==8?53:52}return e}function sb(a,c){if(typeof a=="object")return a;if(typeof a=="number")return new Date(a*1E3);if(typeof a=="string"){if(a.match(/^\d+(\.\d+)?$/))return new Date(parseFloat(a)*
1E3);if(c===va)c=true;return Lb(a,c)||(a?new Date(a):null)}return null}function Lb(a,c){a=a.match(/^([0-9]{4})(-([0-9]{2})(-([0-9]{2})([T ]([0-9]{2}):([0-9]{2})(:([0-9]{2})(\.([0-9]+))?)?(Z|(([-+])([0-9]{2})(:?([0-9]{2}))?))?)?)?)?$/);if(!a)return null;var e=new Date(a[1],0,1);if(c||!a[13]){c=new Date(a[1],0,1,9,0);if(a[3]){e.setMonth(a[3]-1);c.setMonth(a[3]-1)}if(a[5]){e.setDate(a[5]);c.setDate(a[5])}tb(e,c);a[7]&&e.setHours(a[7]);a[8]&&e.setMinutes(a[8]);a[10]&&e.setSeconds(a[10]);a[12]&&e.setMilliseconds(Number("0."+
a[12])*1E3);tb(e,c)}else{e.setUTCFullYear(a[1],a[3]?a[3]-1:0,a[5]||1);e.setUTCHours(a[7]||0,a[8]||0,a[10]||0,a[12]?Number("0."+a[12])*1E3:0);if(a[14]){c=Number(a[16])*60+(a[18]?Number(a[18]):0);c*=a[15]=="-"?1:-1;e=new Date(+e+c*60*1E3)}}return e}function Sa(a){if(typeof a=="number")return a*60;if(typeof a=="object")return a.getHours()*60+a.getMinutes();if(a=a.match(/(\d+)(?::(\d+))?\s*(\w+)?/)){var c=parseInt(a[1],10);if(a[3]){c%=12;if(a[3].toLowerCase().charAt(0)=="p")c+=12}return c*60+(a[2]?parseInt(a[2],
10):0)}}function Ra(a,c,e){return qb(a,null,c,e)}function qb(a,c,e,d){d=d||eb;var g=a,n=c,i,h=e.length,j,o,J,V="";for(i=0;i<h;i++){j=e.charAt(i);if(j=="'")for(o=i+1;o<h;o++){if(e.charAt(o)=="'"){if(g){V+=o==i+1?"'":e.substring(i+1,o);i=o}break}}else if(j=="(")for(o=i+1;o<h;o++){if(e.charAt(o)==")"){i=Ra(g,e.substring(i+1,o),d);if(parseInt(i.replace(/\D/,""),10))V+=i;i=o;break}}else if(j=="[")for(o=i+1;o<h;o++){if(e.charAt(o)=="]"){j=e.substring(i+1,o);i=Ra(g,j,d);if(i!=Ra(n,j,d))V+=i;i=o;break}}else if(j==
"{"){g=c;n=a}else if(j=="}"){g=a;n=c}else{for(o=h;o>i;o--)if(J=hc[e.substring(i,o)]){if(g)V+=J(g,d);i=o-1;break}if(o==i)if(g)V+=j}}return V}function Na(a){return a.end?ic(a.end,a.allDay):O(p(a.start),1)}function ic(a,c){a=p(a);return c||a.getHours()||a.getMinutes()?O(a,1):Ka(a)}function jc(a,c){return(c.msLength-a.msLength)*100+(a.event.start-c.event.start)}function Mb(a,c){return a.end>c.start&&a.start<c.end}function gb(a,c,e,d){var g=[],n,i=a.length,h,j,o,J,V;for(n=0;n<i;n++){h=a[n];j=h.start;o=
c[n];if(o>e&&j<d){if(j<e){j=p(e);J=false}else{j=j;J=true}if(o>d){o=p(d);V=false}else{o=o;V=true}g.push({event:h,start:j,end:o,isStart:J,isEnd:V,msLength:o-j})}}return g.sort(jc)}function hb(a){var c=[],e,d=a.length,g,n,i,h;for(e=0;e<d;e++){g=a[e];for(n=0;;){i=false;if(c[n])for(h=0;h<c[n].length;h++)if(Mb(c[n][h],g)){i=true;break}if(i)n++;else break}if(c[n])c[n].push(g);else c[n]=[g]}return c}function Nb(a,c,e){a.unbind("mouseover").mouseover(function(d){for(var g=d.target,n;g!=this;){n=g;g=g.parentNode}if((g=
n._fci)!==va){n._fci=va;n=c[g];e(n.event,n.element,n);t(d.target).trigger(d)}d.stopPropagation()})}function Ta(a,c,e){for(var d=0,g;d<a.length;d++){g=t(a[d]);g.width(Math.max(0,c-vb(g,e)))}}function Ob(a,c,e){for(var d=0,g;d<a.length;d++){g=t(a[d]);g.height(Math.max(0,c-Qa(g,e)))}}function vb(a,c){return kc(a)+lc(a)+(c?mc(a):0)}function kc(a){return(parseFloat(t.curCSS(a[0],"paddingLeft",true))||0)+(parseFloat(t.curCSS(a[0],"paddingRight",true))||0)}function mc(a){return(parseFloat(t.curCSS(a[0],
"marginLeft",true))||0)+(parseFloat(t.curCSS(a[0],"marginRight",true))||0)}function lc(a){return(parseFloat(t.curCSS(a[0],"borderLeftWidth",true))||0)+(parseFloat(t.curCSS(a[0],"borderRightWidth",true))||0)}function Qa(a,c){return nc(a)+oc(a)+(c?Pb(a):0)}function nc(a){return(parseFloat(t.curCSS(a[0],"paddingTop",true))||0)+(parseFloat(t.curCSS(a[0],"paddingBottom",true))||0)}function Pb(a){return(parseFloat(t.curCSS(a[0],"marginTop",true))||0)+(parseFloat(t.curCSS(a[0],"marginBottom",true))||0)}
function oc(a){return(parseFloat(t.curCSS(a[0],"borderTopWidth",true))||0)+(parseFloat(t.curCSS(a[0],"borderBottomWidth",true))||0)}function Xa(a,c){c=typeof c=="number"?c+"px":c;a.each(function(e,d){d.style.cssText+=";min-height:"+c+";_height:"+c})}function Hb(){}function Qb(a,c){return a-c}function Rb(a){return Math.max.apply(Math,a)}function Ua(a){return(a<10?"0":"")+a}function rb(a,c){if(a[c]!==va)return a[c];c=c.split(/(?=[A-Z])/);for(var e=c.length-1,d;e>=0;e--){d=a[c[e].toLowerCase()];if(d!==
va)return d}return a[""]}function Va(a){return a.replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/'/g,"&#039;").replace(/"/g,"&quot;").replace(/\n/g,"<br />")}function Sb(a){return a.id+"/"+a.className+"/"+a.style.cssText.replace(/(^|;)\s*(top|left|width|height)\s*:[^;]*/ig,"")}function $a(a){a.attr("unselectable","on").css("MozUserSelect","none").bind("selectstart.ui",function(){return false})}function ib(a){a.children().removeClass("fc-first fc-last").filter(":first-child").addClass("fc-first").end().filter(":last-child").addClass("fc-last")}
function ab(a,c){a.each(function(e,d){d.className=d.className.replace(/^fc-\w*/,"fc-id"+c)})}function Tb(a,c){var e=a.source||{},d=a.color,g=e.color,n=c("eventColor"),i=a.backgroundColor||d||e.backgroundColor||g||c("eventBackgroundColor")||n;d=a.borderColor||d||e.borderColor||g||c("eventBorderColor")||n;a=a.textColor||e.textColor||c("eventTextColor");c=[];i&&c.push("background-color:"+i);d&&c.push("border-color:"+d);a&&c.push("color:"+a);return c.join(";")}function fb(a,c,e){if(t.isFunction(a))a=
[a];if(a){var d,g;for(d=0;d<a.length;d++)g=a[d].apply(c,e)||g;return g}}function Za(){for(var a=0;a<arguments.length;a++)if(arguments[a]!==va)return arguments[a]}function pc(a,c){function e(h,j){if(j){Ya(h,j);h.setDate(1)}h=p(h,true);h.setDate(1);j=Ya(p(h),1);var o=p(h),J=p(j),V=g("firstDay"),w=g("weekends")?0:1;if(w){Ba(o);Ba(J,-1,true)}O(o,-((o.getDay()-Math.max(V,w)+7)%7));O(J,(7-J.getDay()+Math.max(V,w))%7);V=Math.round((J-o)/(ub*7));if(g("weekMode")=="fixed"){O(J,(6-V)*7);V=6}d.title=i(h,g("titleFormat"));
d.start=h;d.end=j;d.visStart=o;d.visEnd=J;n(6,V,w?5:7,true)}var d=this;d.render=e;wb.call(d,a,c,"month");var g=d.opt,n=d.renderBasic,i=c.formatDate}function qc(a,c){function e(h,j){j&&O(h,j*7);h=O(p(h),-((h.getDay()-g("firstDay")+7)%7));j=O(p(h),7);var o=p(h),J=p(j),V=g("weekends");if(!V){Ba(o);Ba(J,-1,true)}d.title=i(o,O(p(J),-1),g("titleFormat"));d.start=h;d.end=j;d.visStart=o;d.visEnd=J;n(1,1,V?7:5,false)}var d=this;d.render=e;wb.call(d,a,c,"basicWeek");var g=d.opt,n=d.renderBasic,i=c.formatDates}
function rc(a,c){function e(h,j){if(j){O(h,j);g("weekends")||Ba(h,j<0?-1:1)}d.title=i(h,g("titleFormat"));d.start=d.visStart=p(h,true);d.end=d.visEnd=O(p(d.start),1);n(1,1,1,false)}var d=this;d.render=e;wb.call(d,a,c,"basicDay");var g=d.opt,n=d.renderBasic,i=c.formatDate}function wb(a,c,e){function d(I,f,r,q){z=f;D=r;g();(f=!ia)?n(I,q):H();i(f)}function g(){if($=s("isRTL")){U=-1;x=D-1}else{U=1;x=0}N=s("firstDay");ja=s("weekends")?0:1;qa=s("theme")?"ui":"fc";ca=s("columnFormat")}function n(I,f){var r,
q=qa+"-widget-header",Q=qa+"-widget-content",P;r="<table class='fc-border-separate' style='width:100%' cellspacing='0'><thead><tr>";for(P=0;P<D;P++)r+="<th class='fc- "+q+"'/>";r+="</tr></thead><tbody>";for(P=0;P<I;P++){r+="<tr class='fc-week"+P+"'>";for(q=0;q<D;q++)r+="<td class='fc- "+Q+" fc-day"+(P*D+q)+"'><div>"+(f?"<div class='fc-day-number'/>":"")+"<div class='fc-day-content'><div style='position:relative'>&nbsp;</div></div></div></td>";r+="</tr>"}r+="</tbody></table>";I=t(r).appendTo(a);K=
I.find("thead");ba=K.find("th");ia=I.find("tbody");u=ia.find("tr");G=ia.find("td");E=G.filter(":first-child");R=u.eq(0).find("div.fc-day-content div");ib(K.add(K.find("tr")));ib(u);u.eq(0).addClass("fc-first");o(G);B=t("<div style='position:absolute;z-index:8;top:0;left:0'/>").appendTo(a)}function i(I){var f=I||z==1,r=C.start.getMonth(),q=Ka(new Date),Q,P,aa;f&&ba.each(function(ma,za){Q=t(za);P=ga(ma);Q.html(da(P,ca));ab(Q,P)});G.each(function(ma,za){Q=t(za);P=ga(ma);P.getMonth()==r?Q.removeClass("fc-other-month"):
Q.addClass("fc-other-month");+P==+q?Q.addClass(qa+"-state-highlight fc-today"):Q.removeClass(qa+"-state-highlight fc-today");Q.find("div.fc-day-number").text(P.getDate());f&&ab(Q,P)});u.each(function(ma,za){aa=t(za);if(ma<z){aa.show();ma==z-1?aa.addClass("fc-last"):aa.removeClass("fc-last")}else aa.hide()})}function h(I){k=I;I=k-K.height();var f,r,q;if(s("weekMode")=="variable")f=r=Math.floor(I/(z==1?2:6));else{f=Math.floor(I/z);r=I-f*(z-1)}E.each(function(Q,P){if(Q<z){q=t(P);Xa(q.find("> div"),(Q==
z-1?r:f)-Qa(q))}})}function j(I){l=I;L.clear();m=Math.floor(l/D);Ta(ba.slice(0,-1),m)}function o(I){I.click(J).mousedown(la)}function J(I){if(!s("selectable")){var f=parseInt(this.className.match(/fc\-day(\d+)/)[1]);f=ga(f);b("dayClick",this,f,true,I)}}function V(I,f,r){r&&v.build();r=p(C.visStart);for(var q=O(p(r),D),Q=0;Q<z;Q++){var P=new Date(Math.max(r,I)),aa=new Date(Math.min(q,f));if(P<aa){var ma;if($){ma=Ca(aa,r)*U+x+1;P=Ca(P,r)*U+x+1}else{ma=Ca(P,r);P=Ca(aa,r)}o(w(Q,ma,Q,P-1))}O(r,7);O(q,
7)}}function w(I,f,r,q){I=v.rect(I,f,r,q,a);return M(I,a)}function A(I){return p(I)}function fa(I,f){V(I,O(p(f),1),true)}function oa(){T()}function ra(I,f,r){var q=na(I);b("dayClick",G[q.row*D+q.col],I,f,r)}function wa(I,f){F.start(function(r){T();r&&w(r.row,r.col,r.row,r.col)},f)}function sa(I,f,r){var q=F.stop();T();if(q){q=ta(q);b("drop",I,q,true,f,r)}}function ka(I){return p(I.start)}function ha(I){return L.left(I)}function ea(I){return L.right(I)}function na(I){return{row:Math.floor(Ca(I,C.visStart)/
7),col:pa(I.getDay())}}function ta(I){return Y(I.row,I.col)}function Y(I,f){return O(p(C.visStart),I*7+f*U+x)}function ga(I){return Y(Math.floor(I/D),I%D)}function pa(I){return(I-Math.max(N,ja)+D)%D*U+x}function ua(I){return u.eq(I)}function X(){return{left:0,right:l}}var C=this;C.renderBasic=d;C.setHeight=h;C.setWidth=j;C.renderDayOverlay=V;C.defaultSelectionEnd=A;C.renderSelection=fa;C.clearSelection=oa;C.reportDayClick=ra;C.dragStart=wa;C.dragStop=sa;C.defaultEventEnd=ka;C.getHoverListener=function(){return F};
C.colContentLeft=ha;C.colContentRight=ea;C.dayOfWeekCol=pa;C.dateCell=na;C.cellDate=ta;C.cellIsAllDay=function(){return true};C.allDayRow=ua;C.allDayBounds=X;C.getRowCnt=function(){return z};C.getColCnt=function(){return D};C.getColWidth=function(){return m};C.getViewName=function(){return e};C.getDaySegmentContainer=function(){return B};xb.call(C,a,c,e);yb.call(C);zb.call(C);sc.call(C);var s=C.opt,b=C.trigger,H=C.clearEvents,M=C.renderOverlay,T=C.clearOverlays,la=C.daySelectionMousedown,da=c.formatDate,
K,ba,ia,u,G,E,R,B,l,k,m,z,D,v,F,L,$,U,x,N,ja,qa,ca;$a(a.addClass("fc-grid"));v=new Ab(function(I,f){var r,q,Q;ba.each(function(P,aa){r=t(aa);q=r.offset().left;if(P)Q[1]=q;Q=[q];f[P]=Q});Q[1]=q+r.outerWidth();u.each(function(P,aa){if(P<z){r=t(aa);q=r.offset().top;if(P)Q[1]=q;Q=[q];I[P]=Q}});Q[1]=q+r.outerHeight()});F=new Bb(v);L=new Cb(function(I){return R.eq(I)})}function sc(){function a(Y,ga){J(Y);na(e(Y),ga)}function c(){V();ra().empty()}function e(Y){var ga=ha(),pa=ea(),ua=p(n.visStart);pa=O(p(ua),
pa);var X=t.map(Y,Na),C,s,b,H,M,T,la=[];for(C=0;C<ga;C++){s=hb(gb(Y,X,ua,pa));for(b=0;b<s.length;b++){H=s[b];for(M=0;M<H.length;M++){T=H[M];T.row=C;T.level=b;la.push(T)}}O(ua,7);O(pa,7)}return la}function d(Y,ga,pa){j(Y)&&g(Y,ga);pa.isEnd&&o(Y)&&ta(Y,ga,pa);w(Y,ga)}function g(Y,ga){var pa=wa(),ua;ga.draggable({zIndex:9,delay:50,opacity:i("dragOpacity"),revertDuration:i("dragRevertDuration"),start:function(X,C){h("eventDragStart",ga,Y,X,C);fa(Y,ga);pa.start(function(s,b,H,M){ga.draggable("option",
"revert",!s||!H&&!M);ka();if(s){ua=H*7+M*(i("isRTL")?-1:1);sa(O(p(Y.start),ua),O(Na(Y),ua))}else ua=0},X,"drag")},stop:function(X,C){pa.stop();ka();h("eventDragStop",ga,Y,X,C);if(ua)oa(this,Y,ua,0,Y.allDay,X,C);else{ga.css("filter","");A(Y,ga)}}})}var n=this;n.renderEvents=a;n.compileDaySegs=e;n.clearEvents=c;n.bindDaySeg=d;Db.call(n);var i=n.opt,h=n.trigger,j=n.isEventDraggable,o=n.isEventResizable,J=n.reportEvents,V=n.reportEventClear,w=n.eventElementHandlers,A=n.showEvents,fa=n.hideEvents,oa=n.eventDrop,
ra=n.getDaySegmentContainer,wa=n.getHoverListener,sa=n.renderDayOverlay,ka=n.clearOverlays,ha=n.getRowCnt,ea=n.getColCnt,na=n.renderDaySegs,ta=n.resizableDayEvent}function tc(a,c){function e(j,o){if(o){O(j,o*1);g("weekends")||Ba(j,o<0?-1:1)}j=xa(p(j,true),Sa(g("minTime")));o=xa(p(j),Sa(g("maxTime"))-Sa(g("minTime")));var J=p(j),V=p(o);d.title=i(J,O(p(V),-1),g("titleFormat"));d.start=j;d.end=o;d.visStart=J;d.visEnd=V;j=Math.round((V-J)/1E3/60/g("slotMinutes"));n(h.length,h.length,j,false)}var d=this;
d.render=e;jb.call(d,a,c,"resourceDay");var g=d.opt,n=d.renderBasic,i=c.formatDates,h=d.getResources}function uc(a,c){function e(j,o){o&&O(j,o*7);j=O(p(j),-((j.getDay()-g("firstDay")+7)%7));o=O(p(j),7);var J=p(j),V=p(o),w=g("weekends");if(!w){Ba(J);Ba(V,-1,true)}d.title=i(J,O(p(V),-1),g("titleFormat"));d.start=j;d.end=o;d.visStart=J;d.visEnd=V;n(h.length,h.length,w?7:5,false)}var d=this;d.render=e;jb.call(d,a,c,"resourceWeek");var g=d.opt,n=d.renderBasic,i=c.formatDates,h=d.getResources}function vc(a,
c){function e(j,o){var J=g("weekends");if(o)O(j,o*g("numberOfWeeks")*J?7:5);j=O(p(j),-((j.getDay()-g("firstDay")+J?7:5)%J?7:5));o=fc(p(j),g("numberOfWeeks"));var V=p(j),w=p(o);if(!J){Ba(V);Ba(w,-1,true)}d.title=i(V,O(p(w),-1),g("titleFormat"));d.start=j;d.end=o;d.visStart=V;d.visEnd=w;n(h.length,h.length,J?g("numberOfWeeks")*7:g("numberOfWeeks")*5,false)}var d=this;d.render=e;jb.call(d,a,c,"resourceNextWeeks");var g=d.opt,n=d.renderBasic,i=c.formatDates,h=d.getResources}function wc(a,c){function e(j,
o){if(o){Ya(j,o*1);j.setDate(1)}var J=p(j,true);J.setDate(1);var V=Ya(p(J),1);j=p(J);var w=p(V);o=g("weekends");if(!o){Ba(j);Ba(w,-1,true)}d.title=i(j,O(p(w),-1),g("titleFormat"));d.start=J;d.end=V;d.visStart=j;d.visEnd=w;J=Math.round((w-j)/ub);if(!o){V=0;for(w=1;w<=J;w++){o=O(p(j),w);if(o.getDay()==0||o.getDay()==6)V++}J-=V}n(h.length,h.length,J,false)}var d=this;d.render=e;jb.call(d,a,c,"resourceMonth");var g=d.opt,n=d.renderBasic,i=c.formatDates,h=d.getResources}function jb(a,c,e){function d(f,
r,q,Q){D=r;v=q;g();(r=!u)||e=="resourceMonth"?n(f,Q):M();i(r)}function g(){if(U=b("isRTL")){x=-1;N=v-1}else{x=1;N=0}ja=b("firstDay");qa=b("weekends")?0:1;ca=b("theme")?"ui":"fc";I=b("columnFormat")}function n(f,r){var q,Q=ca+"-widget-header",P=ca+"-widget-content",aa,ma,za=s.getResources;q="<table class='fc-border-separate' style='width:100%' cellspacing='0'><thead><tr class='fc-first fc-last'><th class='fc-resourceName'>&nbsp;</th>";for(aa=0;aa<v;aa++)q+="<th class='fc- "+Q+"'/>";q+="</tr></thead><tbody>";
for(aa=0;aa<f;aa++){Q=za[aa].id;ma=za[aa].name;q+="<tr class='fc-week"+Q+"'><td class='fc-resourceName'>"+ma+"</td>";for(ma=0;ma<v;ma++)q+="<td class='fc- "+P+" fc-day"+ma+" fc-resource"+Q+"'><div>"+(r?"<div class='fc-day-number'/>":"")+"<div class='fc-day-content'><div style='position:relative'>&nbsp;</div></div></div></td>";q+="</tr>"}q+="</tbody></table>";f=a.html(t(q));ba=f.find("thead");ia=ba.find("th:not(th.fc-resourceName)");u=f.find("tbody");G=u.find("tr");E=u.find("td:not(td.fc-resourceName)");
R=G.children().filter(":first-child");B=G.eq(0).find("div.fc-day-content div");ia.removeClass("fc-first fc-last").filter(":first").addClass("fc-first").end().filter(":last").addClass("fc-last");E.removeClass("fc-first fc-last");G.each(function(){t(this).children("td:not(td.fc-resourceName):first").addClass("fc-first");t(this).children("td:not(td.fc-resourceName):last").addClass("fc-last")});G.eq(0).addClass("fc-first");o(E);l=t("<div style='position:absolute;z-index:8;top:0;left:0'/>").appendTo(a)}
function i(){s.start.getMonth();var f=Ka(new Date),r,q,Q,P=0;b("weekends");ia.each(function(aa,ma){r=t(ma);q=ga(aa);r.html(K(q,I));if(q.getDay()==0||q.getDay()==6)r.addClass("fc-weekend");q.getDay()==1&&e=="resourceNextWeeks"&&r.html(r.html()+"<br>"+b("weekPrefix")+" "+Kb(q));ab(r,aa)});P=0;E.each(function(aa,ma){r=t(ma);q=ga(aa);+q==+f?r.addClass(ca+"-state-highlight fc-today"):r.removeClass(ca+"-state-highlight fc-today");r.find("div.fc-day-number").text(q.getDate());ab(r,aa)});G.each(function(aa,
ma){Q=t(ma);if(aa<D){Q.show();aa==D-1?Q.addClass("fc-last"):Q.removeClass("fc-last")}else Q.hide()})}function h(f){m=f;f=m-ba.height();var r,q,Q;if(b("weekMode")=="variable")r=q=Math.floor(f/(D==1?2:6));else{r=Math.floor(f/D);q=f-r*(D-1)}R.each(function(P,aa){if(P<D){Q=t(aa);Xa(Q.find("> div"),(P==D-1?q:r)-Qa(Q))}})}function j(f){k=f;k-=t("th.fc-resourceName").css("width").replace("px","");$.clear();z=Math.floor(k/v);Ta(ia.slice(0,-1),z)}function o(f){f.click(J).mousedown(da)}function J(f){if(!b("selectable")){var r=
parseInt(this.className.match(/fc\-day(\d+)/)[1]);r=ga(r);H("dayClick",this,r,true,f)}}function V(f,r,q,Q){q&&F.build();q=p(s.visStart);var P=O(p(q),v);if(e=="resourceDay")P=xa(p(q),b("slotMinutes")*v);else b("weekends")||(P=p(s.visEnd));f=new Date(Math.max(q,f));P=new Date(Math.min(P,r));if(f<P){if(e=="resourceDay"){r=(f-q)/1E3/60/b("slotMinutes");q=(P-q)/1E3/60/b("slotMinutes")}else{if(U){r=Ca(P,q)*x+N+1;q=Ca(f,q)*x+N+1}else{r=Ca(f,q);q=Ca(P,q)}if(!b("weekends")){var aa=0;for(P=0;P<=r;P++){f=O(p(s.visStart),
P);if(f.getDay()==0||f.getDay()==6)aa++}r-=aa;for(P=aa=0;P<=q-1;P++){f=O(p(s.visStart),P);if(f.getDay()==0||f.getDay()==6)aa++}q-=aa}}o(w(Q,r,Q,q-1))}}function w(f,r,q,Q){f=F.rect(f,Math.round(r),q,Math.round(Q),a);return T(f,a)}function A(f){return p(f)}function fa(f,r,q,Q){e=="resourceDay"?V(f,xa(p(r),b("slotMinutes")),true,Q):V(f,O(p(r),1),true,Q)}function oa(){la()}function ra(f,r,q,Q){var P=na(f);H("dayClick",E[P.col],f,r,q,Q)}function wa(f,r){L.start(function(q){la();q&&w(q.row,q.col,q.row,
q.col)},r)}function sa(f,r,q){var Q=L.stop();la();if(Q){var P=s.getResources[Q.row];Q=ta(Q);H("drop",f,Q,true,r,q,P)}}function ka(f){return p(f.start)}function ha(f){return $.left(f)}function ea(f){return $.right(f)}function na(f){var r,q,Q,P,aa,ma,za,bb,Ja=b("weekends");if(e=="resourceDay")r=ua(f);else if(e=="resourceNextWeeks"){q=f.getFullYear();Q=f.getMonth();P=f.getDate();for(var Ga=0;Ga<v;Ga++){aa=Y(Ga);ma=aa.getFullYear();za=aa.getMonth();bb=aa.getDate();if(q==ma&&Q==za&&P==bb){r=Ga;break}else if(aa>
f&&!Ja){r=Ga-1;break}}if(typeof r=="undefined")r=Ga}else r=pa(f.getDay());return{col:r}}function ta(f){return Y(f.col)}function Y(f){if(e=="resourceDay")return xa(p(s.visStart),f*b("slotMinutes"));else{if(!b("weekends")){var r,q;for(q=0;q<=f;q++){r=O(p(s.visStart),q);if(r.getDay()==6||r.getDay()==0)f++}}return O(p(s.visStart),f,true)}}function ga(f){return Y(f%v)}function pa(f){return(f-Math.max(ja,qa)+v)%v*x+N}function ua(f){var r=f.getHours();f=f.getMinutes();for(var q=b("slotMinutes"),Q,P,aa,ma,
za=0;za<=60/q;za++){Q=za*q;P=Math.abs(Q-f);if(P<=aa||za==0){aa=P;ma=Q}if(ma==60){r++;ma=0}}f=ma;for(za=0;za<v;za++)if(ga(za).getHours()==r&&ga(za).getMinutes()==f)return za;return v}function X(f){return G.eq(f)}function C(){var f=parseInt(t(ba).find("th.fc-resourceName").css("width").replace("px",""));return{left:f,right:k+f}}var s=this;s.renderBasic=d;s.setHeight=h;s.setWidth=j;s.renderDayOverlay=V;s.defaultSelectionEnd=A;s.renderSelection=fa;s.clearSelection=oa;s.reportDayClick=ra;s.dragStart=wa;
s.dragStop=sa;s.defaultEventEnd=ka;s.getHoverListener=function(){return L};s.colContentLeft=ha;s.colContentRight=ea;s.dayOfWeekCol=pa;s.timeOfDayCol=ua;s.dateCell=na;s.cellDate=ta;s.cellIsAllDay=function(){return true};s.allDayRow=X;s.allDayBounds=C;s.getRowCnt=function(){return D};s.getColCnt=function(){return v};s.getResources=c.fetchResources();s.getColWidth=function(){return z};s.getViewName=function(){return e};s.getDaySegmentContainer=function(){return l};xb.call(s,a,c,e);yb.call(s);zb.call(s);
xc.call(s);var b=s.opt,H=s.trigger,M=s.clearEvents,T=s.renderOverlay,la=s.clearOverlays,da=s.daySelectionMousedown,K=c.formatDate,ba,ia,u,G,E,R,B,l,k,m,z,D,v,F,L,$,U,x,N,ja,qa,ca,I;$a(a.addClass("fc-grid"));F=new Ab(function(f,r){var q,Q,P;ia.each(function(aa,ma){q=t(ma);Q=q.offset().left;if(aa)P[1]=Q;P=[Q];r[aa]=P});P[1]=Q+q.outerWidth();G.each(function(aa,ma){if(aa<D){q=t(ma);Q=q.offset().top;if(aa)P[1]=Q;P=[Q];f[aa]=P}});P[1]=Q+q.outerHeight()});L=new Bb(F);$=new Cb(function(f){return B.eq(f)})}
function xc(){function a(b,H){V(b);Y(e(b),H)}function c(){w();wa().empty()}function e(b){var H=ea();na();var M=i.getResources,T=p(i.visStart),la=p(i.visEnd),da=t.map(b,Na),K,ba,ia,u,G,E,R;K=ta();var B,l=[],k=h("weekends"),m,z,D,v;if(K=="resourceDay")da=t.map(b,function(F){return F.end||O(F.start,1)});for(K=0;K<H;K++){R=M[K].id;ba=hb(gb(b,da,T,la));for(ia=0;ia<ba.length;ia++){u=ba[ia];for(G=0;G<u.length;G++){E=u[G];E.row=K;E.level=ia;if(!t.isArray(E.event.resource))E.event.resource=[E.event.resource];
for(B=0;B<E.event.resource.length;B++){m=E.event.start.getDay();D=E.event.start.getDate();if(E.event.end==null){z=E.event.start.getDay();v=p(E.event.start,true).getDate()}else{z=E.event.end.getDay();v=E.event.end.getDate()}!k&&(m==6||m==0)&&(z==6||z==0)&&(D==v||O(p(E.event.start),1).getDate()==v)||R==E.event.resource[B]&&l.push(E)}}}}return l}function d(b,H,M){o(b)&&g(b,H);M.isEnd&&J(b)&&n(b,H,M);A(b,H)}function g(b,H){var M=sa(),T,la,da,K,ba=i.getResources,ia=ta(),u,G,E,R,B,l,k=false;t(ba).each(function(m,
z){if(z.id==b.resource&&z.readonly)k=true});H.draggable({zIndex:9,delay:50,disabled:k,opacity:h("dragOpacity"),revertDuration:h("dragRevertDuration"),start:function(m,z){j("eventDragStart",H,b,m,z);oa(b,H);M.start(function(D,v,F,L){H.draggable("option","revert",!D||!F&&!L||ba[D.row].readonly===true);ha();if(D&&!ba[D.row].readonly){da=F;K=ba[D.row].id;if(ia=="resourceDay"){la=L*(h("isRTL")?-1:1)*h("slotMinutes");ka(xa(p(b.start),la),xa(p(b.end),la),false,D.row)}else{T=R=B=L*(h("isRTL")?-1:1);if(!h("weekends")&&
(T>0||T<0))if(T>0){for(l=1;l<=R;l++){u=O(p(b.start),l);if(u.getDay()==6||u.getDay()==0)R++}for(l=1;l<=B;l++){u=O(p(b.end),l);if(u.getDay()==6||u.getDay()==0)B++}}else{for(l=-1;l>=R;l--){u=O(p(b.start),l);if(u.getDay()==6||u.getDay()==0)R--}for(l=-1;l>=B;l--){u=O(p(b.end),l);if(u.getDay()==6||u.getDay()==0)B--}}ka(O(p(b.start),R),O(Na(b),B),false,D.row)}}else da=T=la=0},m,"drag")},stop:function(m,z){M.stop();ha();j("eventDragStop",H,b,m,z);if(ia=="resourceDay"&&(la||da))ra(this,b,0,la,b.allDay,m,z,
K);else if(T||da){if(!h("weekends"))if(T>0){G=0;for(l=1;l<=T+G;l++){u=O(p(b.start),l);if(u.getDay()==6||u.getDay()==0)G++}if(G>0)b.start=O(p(b.start),G,true);G=0;for(l=1;l<=T+G;l++){u=O(p(b.end),l);if(u.getDay()==6||u.getDay()==0)G++}if(G>0)b.end=O(p(b.end),G,true)}else{E=0;for(l=-1;l>=T+E;l--){u=O(p(b.start),l);if(u.getDay()==6||u.getDay()==0)E--}if(E<0)b.start=O(p(b.start),E,true);E=0;for(l=-1;l>=T+E;l--){u=O(p(b.end),l);if(u.getDay()==6||u.getDay()==0)E--}if(E<0)b.end=O(p(b.end),E,true)}ra(this,
b,T,0,b.allDay,m,z,K)}else{H.css("filter","");fa(b,H)}}})}function n(b,H,M){var T=h("isRTL"),la=T?"w":"e",da=H.find("div.ui-resizable-"+la),K=false,ba=false;t(i.getResources).each(function(ia,u){if(u.id==b.resource&&u.readonly)ba=true});if(ba)return false;$a(H);H.mousedown(function(ia){ia.preventDefault()}).click(function(ia){if(K){ia.preventDefault();ia.stopImmediatePropagation()}});da.mousedown(function(ia){function u(U){j("eventResizeStop",this,b,U);t("body").css("cursor","");G.stop();ha();if(m){if(!h("weekends"))if(m>
0){for(var x=0,N=1;N<=m+x;N++){$=O(p(b.end),N);if($.getDay()==6||$.getDay()==0)x++}if(x>0)b.end=O(p(b.end),x,true)}else{x=0;for(N=-1;N>=m+x;N--){$=O(p(b.end),N);if($.getDay()==6||$.getDay()==0)x--}if(x<0)b.end=O(p(b.end),x,true)}s(this,b,m,0,U)}else D&&s(this,b,0,D,U);setTimeout(function(){K=false},0)}if(ia.which==1){K=true;var G=i.getHoverListener();ea();var E=na(),R=ta(),B=T?-1:1,l=T?E-1:0,k=H.css("top"),m,z,D,v,F=t.extend({},b),L=ga(b.start),$;pa();t("body").css("cursor",la+"-resize").one("mouseup",
u);j("eventResizeStart",this,b,ia);G.start(function(U,x){if(U){Math.max(L.row,U.row);U=U.col;if(R=="resourceDay"){D=h("slotMinutes")*U*B+l-(h("slotMinutes")*x.col*B+l);U=xa(ua(b),D,true)}else{m=z=7+U*B+l-(7+x.col*B+l);if(!h("weekends")&&(m>0||m<0))if(m>0)for(U=1;U<=z;U++){$=O(p(b.end),U);if($.getDay()==6||$.getDay()==0)z++}else for(U=-1;U>=z;U--){$=O(p(b.end),U);if($.getDay()==6||$.getDay()==0)z--}U=O(ua(b),z,true)}if(m||D){F.end=U;var N=v;v=X(C([F]),M.row,k);v.find("*").css("cursor",la+"-resize");
N&&N.remove();oa(b)}else if(v){fa(b);v.remove();v=null}ha();R=="resourceDay"?ka(b.start,xa(p(U),0),1,x.row):ka(b.start,O(p(U),1),1,x.row)}},ia)}})}var i=this;i.renderEvents=a;i.compileDaySegs=e;i.clearEvents=c;i.bindDaySeg=d;i.resizableResourceEvent=n;Db.call(i);var h=i.opt,j=i.trigger,o=i.isEventDraggable,J=i.isEventResizable,V=i.reportEvents,w=i.reportEventClear,A=i.eventElementHandlers,fa=i.showEvents,oa=i.hideEvents,ra=i.eventDrop,wa=i.getDaySegmentContainer,sa=i.getHoverListener,ka=i.renderDayOverlay,
ha=i.clearOverlays,ea=i.getRowCnt,na=i.getColCnt,ta=i.getViewName,Y=i.renderDaySegs,ga=i.dateCell,pa=i.clearSelection,ua=i.eventEnd,X=i.renderTempDaySegs,C=i.compileDaySegs,s=i.eventResize}function yc(a,c){function e(h,j){j&&O(h,j*7);h=O(p(h),-((h.getDay()-g("firstDay")+7)%7));j=O(p(h),7);var o=p(h),J=p(j),V=g("weekends");if(!V){Ba(o);Ba(J,-1,true)}d.title=i(o,O(p(J),-1),g("titleFormat"));d.start=h;d.end=j;d.visStart=o;d.visEnd=J;n(V?7:5)}var d=this;d.render=e;Ub.call(d,a,c,"agendaWeek");var g=d.opt,
n=d.renderAgenda,i=c.formatDates}function zc(a,c){function e(h,j){if(j){O(h,j);g("weekends")||Ba(h,j<0?-1:1)}j=p(h,true);var o=O(p(j),1);d.title=i(h,g("titleFormat"));d.start=d.visStart=j;d.end=d.visEnd=o;n(1)}var d=this;d.render=e;Ub.call(d,a,c,"agendaDay");var g=d.opt,n=d.renderAgenda,i=c.formatDate}function Ub(a,c,e){function d(y){Ea=y;g();z?u():n();i()}function g(){cb=ba("theme")?"ui":"fc";Vb=ba("weekends")?0:1;Wb=ba("firstDay");if(Xb=ba("isRTL")){La=-1;Ma=Ea-1}else{La=1;Ma=0}Oa=Sa(ba("minTime"));
kb=Sa(ba("maxTime"));Yb=ba("columnFormat")}function n(){var y=cb+"-widget-header",Z=cb+"-widget-content",S,W,ya,Aa,Ha,Ia=ba("slotMinutes")%15==0;S="<table style='width:100%' class='fc-agenda-days fc-border-separate' cellspacing='0'><thead><tr><th class='fc-agenda-axis "+y+"'>&nbsp;</th>";for(W=0;W<Ea;W++)S+="<th class='fc- fc-col"+W+" "+y+"'/>";S+="<th class='fc-agenda-gutter "+y+"'>&nbsp;</th></tr></thead><tbody><tr><th class='fc-agenda-axis "+y+"'>&nbsp;</th>";for(W=0;W<Ea;W++)S+="<td class='fc- fc-col"+
W+" "+Z+"'><div><div class='fc-day-content'><div style='position:relative'>&nbsp;</div></div></div></td>";S+="<td class='fc-agenda-gutter "+Z+"'>&nbsp;</td></tr></tbody></table>";z=t(S).appendTo(a);D=z.find("thead");v=D.find("th").slice(1,-1);F=z.find("tbody");L=F.find("td").slice(0,-1);$=L.find("div.fc-day-content div");U=L.eq(0);x=U.find("> div");ib(D.add(D.find("tr")));ib(F.add(F.find("tr")));P=D.find("th:first");aa=z.find(".fc-agenda-gutter");N=t("<div style='position:absolute;z-index:2;left:0;width:100%'/>").appendTo(a);
if(ba("allDaySlot")){ja=t("<div style='position:absolute;z-index:8;top:0;left:0'/>").appendTo(N);S="<table style='width:100%' class='fc-agenda-allday' cellspacing='0'><tr><th class='"+y+" fc-agenda-axis'>"+ba("allDayText")+"</th><td><div class='fc-day-content'><div style='position:relative'/></div></td><th class='"+y+" fc-agenda-gutter'>&nbsp;</th></tr></table>";qa=t(S).appendTo(N);ca=qa.find("tr");w(ca.find("td"));P=P.add(qa.find("th:first"));aa=aa.add(qa.find("th.fc-agenda-gutter"));N.append("<div class='fc-agenda-divider "+
y+"'><div class='fc-agenda-divider-inner'/></div>")}else ja=t([]);I=t("<div style='position:absolute;width:100%;overflow-x:hidden;overflow-y:auto'/>").appendTo(N);f=t("<div style='position:relative;width:100%;overflow:hidden'/>").appendTo(I);r=t("<div style='position:absolute;z-index:8;top:0;left:0'/>").appendTo(f);S="<table class='fc-agenda-slots' style='width:100%' cellspacing='0'><tbody>";ya=Jb();Aa=xa(p(ya),kb);xa(ya,Oa);for(W=Eb=0;ya<Aa;W++){Ha=ya.getMinutes();S+="<tr class='fc-slot"+W+" "+(!Ha?
"":"fc-minor")+"'><th class='fc-agenda-axis "+y+"'>"+(!Ia||!Ha?m(ya,ba("axisFormat")):"&nbsp;")+"</th><td class='"+Z+"'><div style='position:relative'>&nbsp;</div></td></tr>";xa(ya,ba("slotMinutes"));Eb++}S+="</tbody></table>";q=t(S).appendTo(f);Q=q.find("div:first");A(q.find("td"));P=P.add(q.find("th:first"))}function i(){var y,Z,S,W,ya=Ka(new Date);for(y=0;y<Ea;y++){W=na(y);Z=v.eq(y);Z.html(m(W,Yb));S=L.eq(y);+W==+ya?S.addClass(cb+"-state-highlight fc-today"):S.removeClass(cb+"-state-highlight fc-today");
ab(Z.add(S),W)}}function h(y,Z){if(y===va)y=bb;bb=y;Fb={};var S=F.position().top,W=I.position().top;y=Math.min(y-S,q.height()+W+1);x.height(y-Qa(U));N.css("top",S);I.height(y-W-1);db=Q.height()+1;Z&&o()}function j(y){za=y;lb.clear();Ja=0;Ta(P.width("").each(function(Z,S){Ja=Math.max(Ja,t(S).outerWidth())}),Ja);y=I[0].clientWidth;if(Gb=I.width()-y){Ta(aa,Gb);aa.show().prev().removeClass("fc-last")}else aa.hide().prev().addClass("fc-last");Ga=Math.floor((y-Ja)/Ea);Ta(v.slice(0,-1),Ga)}function o(){function y(){I.scrollTop(W)}
var Z=Jb(),S=p(Z);S.setHours(ba("firstHour"));var W=ga(Z,S)+1;y();setTimeout(y,0)}function J(){Zb=I.scrollTop()}function V(){I.scrollTop(Zb)}function w(y){y.click(fa).mousedown(l)}function A(y){y.click(fa).mousedown(M)}function fa(y){if(!ba("selectable")){var Z=Math.min(Ea-1,Math.floor((y.pageX-z.offset().left-Ja)/Ga)),S=na(Z),W=this.parentNode.className.match(/fc-slot(\d+)/);if(W){W=parseInt(W[1])*ba("slotMinutes");var ya=Math.floor(W/60);S.setHours(ya);S.setMinutes(W%60+Oa);ia("dayClick",L[Z],S,
false,y)}else ia("dayClick",L[Z],S,true,y)}}function oa(y,Z,S){S&&Pa.build();var W=p(K.visStart);if(Xb){S=Ca(Z,W)*La+Ma+1;y=Ca(y,W)*La+Ma+1}else{S=Ca(y,W);y=Ca(Z,W)}S=Math.max(0,S);y=Math.min(Ea,y);S<y&&w(ra(0,S,0,y-1))}function ra(y,Z,S,W){y=Pa.rect(y,Z,S,W,N);return G(y,N)}function wa(y,Z){for(var S=p(K.visStart),W=O(p(S),1),ya=0;ya<Ea;ya++){var Aa=new Date(Math.max(S,y)),Ha=new Date(Math.min(W,Z));if(Aa<Ha){var Ia=ya*La+Ma;Ia=Pa.rect(0,Ia,0,Ia,f);Aa=ga(S,Aa);Ha=ga(S,Ha);Ia.top=Aa;Ia.height=Ha-
Aa;A(G(Ia,f))}O(S,1);O(W,1)}}function sa(y){return lb.left(y)}function ka(y){return lb.right(y)}function ha(y){return{row:Math.floor(Ca(y,K.visStart)/7),col:Y(y.getDay())}}function ea(y){var Z=na(y.col);y=y.row;ba("allDaySlot")&&y--;y>=0&&xa(Z,Oa+y*ba("slotMinutes"));return Z}function na(y){return O(p(K.visStart),y*La+Ma)}function ta(y){return ba("allDaySlot")&&!y.row}function Y(y){return(y-Math.max(Wb,Vb)+Ea)%Ea*La+Ma}function ga(y,Z){y=p(y,true);if(Z<xa(p(y),Oa))return 0;if(Z>=xa(p(y),kb))return q.height();
y=ba("slotMinutes");Z=Z.getHours()*60+Z.getMinutes()-Oa;var S=Math.floor(Z/y),W=Fb[S];if(W===va)W=Fb[S]=q.find("tr:eq("+S+") td div")[0].offsetTop;return Math.max(0,Math.round(W-1+db*(Z%y/y)))}function pa(){return{left:Ja,right:za-Gb}}function ua(){return ca}function X(y){var Z=p(y.start);if(y.allDay)return Z;return xa(Z,ba("defaultEventMinutes"))}function C(y,Z){if(Z)return p(y);return xa(p(y),ba("slotMinutes"))}function s(y,Z,S){if(S)ba("allDaySlot")&&oa(y,O(p(Z),1),true);else b(y,Z)}function b(y,
Z){var S=ba("selectHelper");Pa.build();if(S){var W=Ca(y,K.visStart)*La+Ma;if(W>=0&&W<Ea){W=Pa.rect(0,W,0,W,f);var ya=ga(y,y),Aa=ga(y,Z);if(Aa>ya){W.top=ya;W.height=Aa-ya;W.left+=2;W.width-=5;if(t.isFunction(S)){if(y=S(y,Z)){W.position="absolute";W.zIndex=8;ma=t(y).css(W).appendTo(f)}}else{W.isStart=true;W.isEnd=true;ma=t(k({title:"",start:y,end:Z,className:["fc-select-helper"],editable:false},W));ma.css("opacity",ba("dragOpacity"))}if(ma){A(ma);f.append(ma);Ta(ma,W.width,true);Ob(ma,W.height,true)}}}}else wa(y,
Z)}function H(){E();if(ma){ma.remove();ma=null}}function M(y){if(y.which==1&&ba("selectable")){B(y);var Z;Wa.start(function(S,W){H();if(S&&S.col==W.col&&!ta(S)){W=ea(W);S=ea(S);Z=[W,xa(p(W),ba("slotMinutes")),S,xa(p(S),ba("slotMinutes"))].sort(Qb);b(Z[0],Z[3])}else Z=null},y);t(document).one("mouseup",function(S){Wa.stop();if(Z){+Z[0]==+Z[1]&&T(Z[0],false,S);R(Z[0],Z[3],false,S)}})}}function T(y,Z,S){ia("dayClick",L[Y(y.getDay())],y,Z,S)}function la(y,Z){Wa.start(function(S){E();if(S)if(ta(S))ra(S.row,
S.col,S.row,S.col);else{S=ea(S);var W=xa(p(S),ba("defaultEventMinutes"));wa(S,W)}},Z)}function da(y,Z,S){var W=Wa.stop();E();W&&ia("drop",y,ea(W),ta(W),Z,S)}var K=this;K.renderAgenda=d;K.setWidth=j;K.setHeight=h;K.beforeHide=J;K.afterShow=V;K.defaultEventEnd=X;K.timePosition=ga;K.dayOfWeekCol=Y;K.dateCell=ha;K.cellDate=ea;K.cellIsAllDay=ta;K.allDayRow=ua;K.allDayBounds=pa;K.getHoverListener=function(){return Wa};K.colContentLeft=sa;K.colContentRight=ka;K.getDaySegmentContainer=function(){return ja};
K.getSlotSegmentContainer=function(){return r};K.getMinMinute=function(){return Oa};K.getMaxMinute=function(){return kb};K.getBodyContent=function(){return f};K.getRowCnt=function(){return 1};K.getColCnt=function(){return Ea};K.getColWidth=function(){return Ga};K.getSlotHeight=function(){return db};K.getViewName=function(){return e};K.defaultSelectionEnd=C;K.renderDayOverlay=oa;K.renderSelection=s;K.clearSelection=H;K.reportDayClick=T;K.dragStart=la;K.dragStop=da;xb.call(K,a,c,e);yb.call(K);zb.call(K);
Ac.call(K);var ba=K.opt,ia=K.trigger,u=K.clearEvents,G=K.renderOverlay,E=K.clearOverlays,R=K.reportSelection,B=K.unselect,l=K.daySelectionMousedown,k=K.slotSegHtml,m=c.formatDate,z,D,v,F,L,$,U,x,N,ja,qa,ca,I,f,r,q,Q,P,aa,ma,za,bb,Ja,Ga,Gb,db,Zb,Ea,Eb,Pa,Wa,lb,Fb={},cb,Wb,Vb,Xb,La,Ma,Oa,kb,Yb;$a(a.addClass("fc-agenda"));Pa=new Ab(function(y,Z){function S(mb){return Math.max(Ia,Math.min(Bc,mb))}var W,ya,Aa;v.each(function(mb,Cc){W=t(Cc);ya=W.offset().left;if(mb)Aa[1]=ya;Aa=[ya];Z[mb]=Aa});Aa[1]=ya+
W.outerWidth();if(ba("allDaySlot")){W=ca;ya=W.offset().top;y[0]=[ya,ya+W.outerHeight()]}for(var Ha=f.offset().top,Ia=I.offset().top,Bc=Ia+I.outerHeight(),nb=0;nb<Eb;nb++)y.push([S(Ha+db*nb),S(Ha+db*(nb+1))])});Wa=new Bb(Pa);lb=new Cb(function(y){return $.eq(y)})}function Ac(){function a(k,m){sa(k);var z,D=k.length,v=[],F=[];for(z=0;z<D;z++)k[z].allDay?v.push(k[z]):F.push(k[z]);if(A("allDaySlot")){s(e(v),m);ea()}n(d(F),m)}function c(){ka();na().empty();ta().empty()}function e(k){k=hb(gb(k,t.map(k,
Na),w.visStart,w.visEnd));var m,z=k.length,D,v,F,L=[];for(m=0;m<z;m++){D=k[m];for(v=0;v<D.length;v++){F=D[v];F.row=0;F.level=m;L.push(F)}}return L}function d(k){var m=H(),z=pa(),D=ga(),v=xa(p(w.visStart),z),F=t.map(k,g),L,$,U,x,N,ja,qa=[];for(L=0;L<m;L++){$=hb(gb(k,F,v,xa(p(v),D-z)));Dc($);for(U=0;U<$.length;U++){x=$[U];for(N=0;N<x.length;N++){ja=x[N];ja.col=L;ja.level=U;qa.push(ja)}}O(v,1,true)}return qa}function g(k){return k.end?p(k.end):xa(p(k.start),A("defaultEventMinutes"))}function n(k,m){var z,
D=k.length,v,F,L,$,U,x,N,ja,qa,ca="",I,f,r={},q={},Q=ta(),P;z=H();if(I=A("isRTL")){f=-1;P=z-1}else{f=1;P=0}for(z=0;z<D;z++){v=k[z];F=v.event;L=ua(v.start,v.start);$=ua(v.start,v.end);U=v.col;x=v.level;N=v.forward||0;ja=X(U*f+P);qa=C(U*f+P)-ja;qa=Math.min(qa-6,qa*0.95);U=x?qa/(x+N+1):N?(qa/(N+1)-6)*2:qa;x=ja+qa/(x+N+1)*x*f+(I?qa-U:0);v.top=L;v.left=x;v.outerWidth=U;v.outerHeight=$-L;ca+=i(F,v)}Q[0].innerHTML=ca;I=Q.children();for(z=0;z<D;z++){v=k[z];F=v.event;ca=t(I[z]);f=fa("eventRender",F,F,ca);
if(f===false)ca.remove();else{if(f&&f!==true){ca.remove();ca=t(f).css({position:"absolute",top:v.top,left:v.left}).appendTo(Q)}v.element=ca;if(F._id===m)j(F,ca,v);else ca[0]._fci=z;da(F,ca)}}Nb(Q,k,j);for(z=0;z<D;z++){v=k[z];if(ca=v.element){F=r[m=v.key=Sb(ca[0])];v.vsides=F===va?(r[m]=Qa(ca,true)):F;F=q[m];v.hsides=F===va?(q[m]=vb(ca,true)):F;m=ca.find("div.fc-event-content");if(m.length)v.contentTop=m[0].offsetTop}}for(z=0;z<D;z++){v=k[z];if(ca=v.element){ca[0].style.width=Math.max(0,v.outerWidth-
v.hsides)+"px";r=Math.max(0,v.outerHeight-v.vsides);ca[0].style.height=r+"px";F=v.event;if(v.contentTop!==va&&r-v.contentTop<10){ca.find("div.fc-event-time").text(B(F.start,A("timeFormat"))+" - "+F.title);ca.find("div.fc-event-title").remove()}fa("eventAfterRender",F,F,ca)}}}function i(k,m){var z="<",D=k.url,v=Tb(k,A),F=v?" style='"+v+"'":"",L=["fc-event","fc-event-skin","fc-event-vert"];oa(k)&&L.push("fc-event-draggable");m.isStart&&L.push("fc-corner-top");m.isEnd&&L.push("fc-corner-bottom");L=L.concat(k.className);
if(k.source)L=L.concat(k.source.className||[]);z+=D?"a href='"+Va(k.url)+"'":"div";z+=" class='"+L.join(" ")+"' style='position:absolute;z-index:8;top:"+m.top+"px;left:"+m.left+"px;"+v+"'><div class='fc-event-inner fc-event-skin'"+F+"><div class='fc-event-head fc-event-skin'"+F+"><div class='fc-event-time'>"+Va(l(k.start,k.end,A("timeFormat")))+"</div></div><div class='fc-event-content'><div class='fc-event-title'>"+Va(k.title)+"</div></div><div class='fc-event-bg'></div></div>";if(m.isEnd&&ra(k))z+=
"<div class='ui-resizable-handle ui-resizable-s'>=</div>";z+="</"+(D?"a":"div")+">";return z}function h(k,m,z){oa(k)&&o(k,m,z.isStart);z.isEnd&&ra(k)&&b(k,m,z);ha(k,m)}function j(k,m,z){var D=m.find("div.fc-event-time");oa(k)&&J(k,m,D);z.isEnd&&ra(k)&&V(k,m,D);ha(k,m)}function o(k,m,z){function D(){if(!L){m.width(v).height("").draggable("option","grid",null);L=true}}var v,F,L=true,$,U=A("isRTL")?-1:1,x=Y(),N=M(),ja=T(),qa=pa();m.draggable({zIndex:9,opacity:A("dragOpacity","month"),revertDuration:A("dragRevertDuration"),
start:function(ca,I){fa("eventDragStart",m,k,ca,I);ba(k,m);v=m.width();x.start(function(f,r,q,Q){E();if(f){F=false;$=Q*U;if(f.row)if(z){if(L){m.width(N-10);Ob(m,ja*Math.round((k.end?(k.end-k.start)/Ec:A("defaultEventMinutes"))/A("slotMinutes")));m.draggable("option","grid",[N,1]);L=false}}else F=true;else{G(O(p(k.start),$),O(Na(k),$));D()}F=F||L&&!$}else{D();F=true}m.draggable("option","revert",F)},ca,"drag")},stop:function(ca,I){x.stop();E();fa("eventDragStop",m,k,ca,I);if(F){D();m.css("filter",
"");K(k,m)}else{var f=0;L||(f=Math.round((m.offset().top-la().offset().top)/ja)*A("slotMinutes")+qa-(k.start.getHours()*60+k.start.getMinutes()));ia(this,k,$,f,L,ca,I)}}})}function J(k,m,z){function D(f){var r=xa(p(k.start),f),q;if(k.end)q=xa(p(k.end),f);z.text(l(r,q,A("timeFormat")))}function v(){if(L){z.css("display","");m.draggable("option","grid",[ca,I]);L=false}}var F,L=false,$,U,x,N=A("isRTL")?-1:1,ja=Y(),qa=H(),ca=M(),I=T();m.draggable({zIndex:9,scroll:false,grid:[ca,I],axis:qa==1?"y":false,
opacity:A("dragOpacity"),revertDuration:A("dragRevertDuration"),start:function(f,r){fa("eventDragStart",m,k,f,r);ba(k,m);F=m.position();U=x=0;ja.start(function(q,Q,P,aa){m.draggable("option","revert",!q);E();if(q){$=aa*N;if(A("allDaySlot")&&!q.row){if(!L){L=true;z.hide();m.draggable("option","grid",null)}G(O(p(k.start),$),O(Na(k),$))}else v()}},f,"drag")},drag:function(f,r){U=Math.round((r.position.top-F.top)/I)*A("slotMinutes");if(U!=x){L||D(U);x=U}},stop:function(f,r){var q=ja.stop();E();fa("eventDragStop",
m,k,f,r);if(q&&($||U||L))ia(this,k,$,L?0:U,L,f,r);else{v();m.css("filter","");m.css(F);D(0);K(k,m)}}})}function V(k,m,z){var D,v,F=T();m.resizable({handles:{s:"div.ui-resizable-s"},grid:F,start:function(L,$){D=v=0;ba(k,m);m.css("z-index",9);fa("eventResizeStart",this,k,L,$)},resize:function(L,$){D=Math.round((Math.max(F,m.height())-$.originalSize.height)/F);if(D!=v){z.text(l(k.start,!D&&!k.end?null:xa(wa(k),A("slotMinutes")*D),A("timeFormat")));v=D}},stop:function(L,$){fa("eventResizeStop",this,k,
L,$);if(D)u(this,k,0,A("slotMinutes")*D,L,$);else{m.css("z-index",8);K(k,m)}}})}var w=this;w.renderEvents=a;w.compileDaySegs=e;w.clearEvents=c;w.slotSegHtml=i;w.bindDaySeg=h;Db.call(w);var A=w.opt,fa=w.trigger,oa=w.isEventDraggable,ra=w.isEventResizable,wa=w.eventEnd,sa=w.reportEvents,ka=w.reportEventClear,ha=w.eventElementHandlers,ea=w.setHeight,na=w.getDaySegmentContainer,ta=w.getSlotSegmentContainer,Y=w.getHoverListener,ga=w.getMaxMinute,pa=w.getMinMinute,ua=w.timePosition,X=w.colContentLeft,C=
w.colContentRight,s=w.renderDaySegs,b=w.resizableDayEvent,H=w.getColCnt,M=w.getColWidth,T=w.getSlotHeight,la=w.getBodyContent,da=w.reportEventElement,K=w.showEvents,ba=w.hideEvents,ia=w.eventDrop,u=w.eventResize,G=w.renderDayOverlay,E=w.clearOverlays,R=w.calendar,B=R.formatDate,l=R.formatDates}function Dc(a){var c,e,d,g,n,i;for(c=a.length-1;c>0;c--){g=a[c];for(e=0;e<g.length;e++){n=g[e];for(d=0;d<a[c-1].length;d++){i=a[c-1][d];if(Mb(n,i))i.forward=Math.max(i.forward||0,(n.forward||0)+1)}}}}function xb(a,
c,e){function d(X,C){var s=ua[X];if(typeof s=="object")return X=="resources"?s:rb(s,C||e);return s}function g(X,C){return c.trigger.apply(c,[X,C||ha].concat(Array.prototype.slice.call(arguments,2),[ha]))}function n(X){return h(X)&&!d("disableDragging")}function i(X){return h(X)&&!d("disableResizing")}function h(X){return Za(X.editable,(X.source||{}).editable,d("editable"))}function j(X){Y={};var C,s=X.length,b;for(C=0;C<s;C++){b=X[C];if(Y[b._id])Y[b._id].push(b);else Y[b._id]=[b]}}function o(X){return X.end?
p(X.end):ea(X)}function J(X,C){ga.push(C);if(pa[X._id])pa[X._id].push(C);else pa[X._id]=[C]}function V(){ga=[];pa={}}function w(X,C){C.click(function(s){if(!C.hasClass("ui-draggable-dragging")&&!C.hasClass("ui-resizable-resizing"))return g("eventClick",this,X,s)}).hover(function(s){g("eventMouseover",this,X,s)},function(s){g("eventMouseout",this,X,s)})}function A(X,C){oa(X,C,"show")}function fa(X,C){oa(X,C,"hide")}function oa(X,C,s){X=pa[X._id];var b,H=X.length;for(b=0;b<H;b++)if(!C||X[b][0]!=C[0])X[b][s]()}
function ra(X,C,s,b,H,M,T,la){var da=C.allDay,K=C._id,ba=C.resource;sa(Y[K],s,b,H,la);g("eventDrop",X,C,s,b,H,function(){sa(Y[K],-s,-b,da,ba);ta(K)},M,T,la);ta(K)}function wa(X,C,s,b,H,M){var T=C._id;ka(Y[T],s,b);g("eventResize",X,C,s,b,function(){ka(Y[T],-s,-b);ta(T)},H,M);ta(T)}function sa(X,C,s,b,H){s=s||0;for(var M,T=X.length,la=0;la<T;la++){M=X[la];if(b!==va)M.allDay=b;xa(O(M.start,C,true),s);if(M.end)M.end=xa(O(M.end,C,true),s);if(M.resource!=H&&T==1)M.resource=H;na(M,ua)}}function ka(X,C,s){s=
s||0;for(var b,H=X.length,M=0;M<H;M++){b=X[M];b.end=xa(O(o(b),C,true),s);na(b,ua)}}var ha=this;ha.element=a;ha.calendar=c;ha.name=e;ha.opt=d;ha.trigger=g;ha.isEventDraggable=n;ha.isEventResizable=i;ha.reportEvents=j;ha.eventEnd=o;ha.reportEventElement=J;ha.reportEventClear=V;ha.eventElementHandlers=w;ha.showEvents=A;ha.hideEvents=fa;ha.eventDrop=ra;ha.eventResize=wa;var ea=ha.defaultEventEnd,na=c.normalizeEvent,ta=c.reportEventChange,Y={},ga=[],pa={},ua=c.options}function Db(){function a(u,G){var E=
M(),R=ta(),B=Y(),l=0,k,m,z=u.length,D,v;E[0].innerHTML=e(u);d(u,E.children());g(u);n(u,E,G);i(u);h(u);j(u);G=o();for(E=0;E<R;E++){k=[];for(m=0;m<B;m++)k[m]=0;for(;l<z&&(D=u[l]).row==E;){m=Rb(k.slice(D.startCol,D.endCol));D.top=m;m+=D.outerHeight;for(v=D.startCol;v<D.endCol;v++)k[v]=m;l++}G[E].height(Rb(k))}V(u,J(G))}function c(u,G,E){var R=t("<div/>"),B=M(),l=u.length,k;R[0].innerHTML=e(u);R=R.children();B.append(R);d(u,R);i(u);h(u);j(u);V(u,J(o()));R=[];for(B=0;B<l;B++)if(k=u[B].element){u[B].row===
G&&k.css("top",E);R.push(k[0])}return t(R)}function e(u){var G=fa("isRTL"),E,R=u.length,B,l,k,m;E=pa();var z=E.left,D=E.right,v,F,L,$,U,x="",N=ia(),ja=fa("weekends");for(E=0;E<R;E++){B=u[E];l=B.event;m=["fc-event","fc-event-skin","fc-event-hori"];ra(l)&&m.push("fc-event-draggable");if(G){B.isStart&&m.push("fc-corner-right");B.isEnd&&m.push("fc-corner-left");v=C(B.end.getDay()-1);F=C(B.start.getDay());L=B.isEnd?ua(v):z;$=B.isStart?X(F):D}else{B.isStart&&m.push("fc-corner-left");B.isEnd&&m.push("fc-corner-right");
if(N=="resourceMonth"){v=B.start.getDate()-1;F=B.end.getDate()-2;if(!ja){for(U=$=L=0;U<=v;U++){k=O(p(A.visStart),U);if(k.getDay()==0||k.getDay()==6)L++}v-=L;if(B.start.getDay()==6||B.start.getDay()==0)v++;for(U=0;U<=F;U++){k=O(p(A.visStart),U);if(k.getDay()==0||k.getDay()==6)$++}F-=$}if(F<0)F=Y()-1}else if(N=="resourceNextWeeks"){v=b(B.start).col;F=b(B.end).col-1;if(!ja){v=b(B.start).col;F=b(O(p(B.end),-1)).col;if(B.start.getDay()==6||B.start.getDay()==0)v++}}else if(N=="resourceDay"){v=s(B.start);
F=s(B.end)-1}else{v=C(B.start.getDay());F=C(B.end.getDay()-1)}L=B.isStart?ua(v):z;$=B.isEnd?X(F):D}m=m.concat(l.className);if(l.source)m=m.concat(l.source.className||[]);k=l.url;U=Tb(l,fa);x+=k?"<a href='"+Va(k)+"'":"<div";x+=" class='"+m.join(" ")+"' style='position:absolute;z-index:8;left:"+L+"px;"+U+"'><div class='fc-event-inner fc-event-skin'"+(U?" style='"+U+"'":"")+">";if(!l.allDay&&B.isStart)x+="<span class='fc-event-time'>"+Va(la(l.start,l.end,fa("timeFormat")))+"</span>";x+="<span class='fc-event-title' "+
(U?" style='"+U+"'":"")+">"+Va(l.title)+"</span></div>";if(B.isEnd&&wa(l))x+="<div class='ui-resizable-handle ui-resizable-"+(G?"w":"e")+"'>&nbsp;&nbsp;&nbsp;</div>";x+="</"+(k?"a":"div")+">";B.left=L;B.outerWidth=$-L;B.startCol=v;B.endCol=F+1}return x}function d(u,G){var E,R=u.length,B,l,k;for(E=0;E<R;E++){B=u[E];l=B.event;k=t(G[E]);l=oa("eventRender",l,l,k);if(l===false)k.remove();else{if(l&&l!==true){l=t(l).css({position:"absolute",left:B.left});k.replaceWith(l);k=l}B.element=k}}}function g(u){var G,
E=u.length,R,B;for(G=0;G<E;G++){R=u[G];(B=R.element)&&ka(R.event,B)}}function n(u,G,E){var R,B=u.length,l,k,m;for(R=0;R<B;R++){l=u[R];if(k=l.element){m=l.event;if(m._id===E)T(m,k,l);else k[0]._fci=R}}Nb(G,u,T)}function i(u){var G,E=u.length,R,B,l,k,m={};for(G=0;G<E;G++){R=u[G];if(B=R.element){l=R.key=Sb(B[0]);k=m[l];if(k===va)k=m[l]=vb(B,true);R.hsides=k}}}function h(u){var G,E=u.length,R,B;for(G=0;G<E;G++){R=u[G];if(B=R.element)B[0].style.width=Math.max(0,R.outerWidth-R.hsides)+"px"}}function j(u){var G,
E=u.length,R,B,l,k,m={};for(G=0;G<E;G++){R=u[G];if(B=R.element){l=R.key;k=m[l];if(k===va)k=m[l]=Pb(B);R.outerHeight=B[0].offsetHeight+k}}}function o(){var u,G=ta(),E=[];for(u=0;u<G;u++)E[u]=ga(u).find("td:not(.fc-resourceName):first div.fc-day-content > div");return E}function J(u){var G,E=u.length,R=[];for(G=0;G<E;G++)R[G]=u[G][0].offsetTop;return R}function V(u,G){var E,R=u.length,B,l;for(E=0;E<R;E++){B=u[E];if(l=B.element){var k=parseInt(B.top)>0?parseInt(B.top):0;l[0].style.top=G[B.row]+k+"px";
B=B.event;oa("eventAfterRender",B,B,l)}}}function w(u,G,E){var R=fa("isRTL"),B=R?"w":"e",l=G.find("div.ui-resizable-"+B),k=false;$a(G);G.mousedown(function(m){m.preventDefault()}).click(function(m){if(k){m.preventDefault();m.stopImmediatePropagation()}});l.mousedown(function(m){function z(ca){oa("eventResizeStop",this,u,ca);t("body").css("cursor","");D.stop();K();x&&na(this,u,x,0,ca);setTimeout(function(){k=false},0)}if(m.which==1){k=true;var D=A.getHoverListener(),v=ta(),F=Y(),L=R?-1:1,$=R?F-1:0,
U=G.css("top"),x,N,ja=t.extend({},u),qa=b(u.start);ba();t("body").css("cursor",B+"-resize").one("mouseup",z);oa("eventResizeStart",this,u,m);D.start(function(ca,I){if(ca){var f=Math.max(qa.row,ca.row);ca=ca.col;if(v==1)f=0;if(f==qa.row)ca=R?Math.min(qa.col,ca):Math.max(qa.col,ca);x=f*7+ca*L+$-(I.row*7+I.col*L+$);I=O(sa(u),x,true);if(x){ja.end=I;f=N;N=c(H([ja]),E.row,U);N.find("*").css("cursor",B+"-resize");f&&f.remove();ea(u)}else if(N){ha(u);N.remove();N=null}K();da(u.start,O(p(I),1))}},m)}})}var A=
this;A.renderDaySegs=a;A.resizableDayEvent=w;A.renderTempDaySegs=c;var fa=A.opt,oa=A.trigger,ra=A.isEventDraggable,wa=A.isEventResizable,sa=A.eventEnd,ka=A.reportEventElement,ha=A.showEvents,ea=A.hideEvents,na=A.eventResize,ta=A.getRowCnt,Y=A.getColCnt,ga=A.allDayRow,pa=A.allDayBounds,ua=A.colContentLeft,X=A.colContentRight,C=A.dayOfWeekCol,s=A.timeOfDayCol,b=A.dateCell,H=A.compileDaySegs,M=A.getDaySegmentContainer,T=A.bindDaySeg,la=A.calendar.formatDates,da=A.renderDayOverlay,K=A.clearOverlays,ba=
A.clearSelection,ia=A.getViewName}function zb(){function a(w,A,fa){c();A||(A=h(w,fa));j(w,A,fa);e(w,A,fa)}function c(w){if(V){V=false;o();i("unselect",null,w)}}function e(w,A,fa,oa,ra){if(typeof ra=="object"&&ra.readonly===true)return false;V=true;i("select",null,w,A,fa,oa,"",ra)}function d(w){var A=g.cellDate,fa=g.cellIsAllDay,oa=g.getHoverListener(),ra=g.reportDayClick,wa,sa=g.getResources||[],ka,ha=J();if(w.which==1&&n("selectable")){c(w);var ea;oa.start(function(na,ta){o();if(na)ka=typeof sa[na.row]==
"object"?sa[na.row].readonly:false;if(na&&fa(na)&&ka!==true){ea=[A(ta),A(na)].sort(Qb);j(ea[0],ea[1],ha=="resourceDay"?false:true,na.row);wa=na.row}else ea=null},w);t(document).one("mouseup",function(na){oa.stop();if(ea){if(+ea[0]==+ea[1])ra(ea[0],ha=="resourceDay"?false:true,na,sa[wa]);e(ea[0],ha=="resourceDay"?xa(ea[1],n("slotMinutes")):ea[1],ha=="resourceDay"?false:true,na,sa[wa])}})}}var g=this;g.select=a;g.unselect=c;g.reportSelection=e;g.daySelectionMousedown=d;var n=g.opt,i=g.trigger,h=g.defaultSelectionEnd,
j=g.renderSelection,o=g.clearSelection,J=g.getViewName,V=false;n("selectable")&&n("unselectAuto")&&t(document).mousedown(function(w){var A=n("unselectCancel");if(A)if(t(w.target).parents(A).length)return;c(w)})}function yb(){function a(n,i){var h=g.shift();h||(h=t("<div class='fc-cell-overlay' style='position:absolute;z-index:3'/>"));h[0].parentNode!=i[0]&&h.appendTo(i);d.push(h.css(n).show());return h}function c(){for(var n;n=d.shift();)g.push(n.hide().unbind())}var e=this;e.renderOverlay=a;e.clearOverlays=
c;var d=[],g=[]}function Ab(a){var c=this,e,d;c.build=function(){e=[];d=[];a(e,d)};c.cell=function(g,n){var i=e.length,h=d.length,j,o=-1,J=-1;for(j=0;j<i;j++)if(n>=e[j][0]&&n<e[j][1]){o=j;break}for(j=0;j<h;j++)if(g>=d[j][0]&&g<d[j][1]){J=j;break}return o>=0&&J>=0?{row:o,col:J}:null};c.rect=function(g,n,i,h,j){j=j.offset();return{top:e[g][0]-j.top,left:d[n][0]-j.left,width:d[h][1]-d[n][0],height:e[i][1]-e[g][0]}}}function Bb(a){function c(h){Fc(h);h=a.cell(h.pageX,h.pageY);if(!h!=!i||h&&(h.row!=i.row||
h.col!=i.col)){if(h){n||(n=h);g(h,n,h.row-n.row,h.col-n.col)}else g(h,n);i=h}}var e=this,d,g,n,i;e.start=function(h,j,o){g=h;n=i=null;a.build();c(j);d=o||"mousemove";t(document).bind(d,c)};e.stop=function(){t(document).unbind(d,c);return i}}function Fc(a){if(a.pageX===va){a.pageX=a.originalEvent.pageX;a.pageY=a.originalEvent.pageY}}function Cb(a){function c(i){return d[i]=d[i]||a(i)}var e=this,d={},g={},n={};e.left=function(i){return g[i]=g[i]===va?c(i).position().left:g[i]};e.right=function(i){return n[i]=
n[i]===va?e.left(i)+c(i).width():n[i]};e.clear=function(){d={};g={};n={}}}var eb={defaultView:"month",aspectRatio:1.35,header:{left:"title",center:"",right:"today prev,next"},weekends:true,allDayDefault:true,ignoreTimezone:true,lazyFetching:true,startParam:"start",endParam:"end",refetchResources:false,titleFormat:{month:"MMMM yyyy",week:"MMM d[ yyyy]{ '&#8212;'[ MMM] d yyyy}",day:"dddd, MMM d, yyyy",resourceMonth:"MMMM yyyy",resourceWeek:"MMM d[ yyyy]{ '&#8212;'[ MMM] d yyyy}",resourceNextWeeks:"MMM d[ yyyy]{ '&#8212;'[ MMM] d yyyy}",
resourceDay:"dddd, MMM d, yyyy"},columnFormat:{month:"ddd",week:"ddd M/d",day:"dddd M/d",resourceDay:"H:mm",resourceMonth:"M/d",resourceWeek:"ddd M/d",resourceNextWeeks:"ddd M/d"},timeFormat:{"":"h(:mm)t"},isRTL:false,firstDay:0,monthNames:["January","February","March","April","May","June","July","August","September","October","November","December"],monthNamesShort:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],dayNames:["Sunday","Monday","Tuesday","Wednesday","Thursday",
"Friday","Saturday"],dayNamesShort:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],buttonText:{prev:"&nbsp;&#9668;&nbsp;",next:"&nbsp;&#9658;&nbsp;",prevYear:"&nbsp;&lt;&lt;&nbsp;",nextYear:"&nbsp;&gt;&gt;&nbsp;",today:"today",month:"month",week:"week",day:"day",resourceDay:"resource day",resourceWeek:"resource week",resourceNextWeeks:"resource next weeks",resourceMonth:"resource month"},theme:false,buttonIcons:{prev:"circle-triangle-w",next:"circle-triangle-e"},unselectAuto:true,dropAccept:"*",numberOfWeeks:4,
weekPrefix:"Week"},Gc={header:{left:"next,prev today",center:"",right:"title"},buttonText:{prev:"&nbsp;&#9658;&nbsp;",next:"&nbsp;&#9668;&nbsp;",prevYear:"&nbsp;&gt;&gt;&nbsp;",nextYear:"&nbsp;&lt;&lt;&nbsp;"},buttonIcons:{prev:"circle-triangle-e",next:"circle-triangle-w"}},Da=t.fullCalendar={version:"1.5.3.3"},Fa=Da.views={};t.fn.fullCalendar=function(a){if(typeof a=="string"){var c=Array.prototype.slice.call(arguments,1),e;this.each(function(){var g=t.data(this,"fullCalendar");if(g&&t.isFunction(g[a])){g=
g[a].apply(g,c);if(e===va)e=g;a=="destroy"&&t.removeData(this,"fullCalendar")}});if(e!==va)return e;return this}var d=a.eventSources||[];delete a.eventSources;if(a.events){d.push(a.events);delete a.events}a=t.extend(true,{},eb,a.isRTL||a.isRTL===va&&eb.isRTL?Gc:{},a);this.each(function(g,n){g=t(n);n=new $b(g,a,d);g.data("fullCalendar",n);n.render()});return this};Da.sourceNormalizers=[];Da.sourceFetchers=[];var dc={dataType:"json",cache:false},ec=1;Da.addDays=O;Da.cloneDate=p;Da.parseDate=sb;Da.parseISO8601=
Lb;Da.parseTime=Sa;Da.formatDate=Ra;Da.formatDates=qb;var ub=864E5,gc=36E5,Ec=6E4,hc={s:function(a){return a.getSeconds()},ss:function(a){return Ua(a.getSeconds())},m:function(a){return a.getMinutes()},mm:function(a){return Ua(a.getMinutes())},h:function(a){return a.getHours()%12||12},hh:function(a){return Ua(a.getHours()%12||12)},H:function(a){return a.getHours()},HH:function(a){return Ua(a.getHours())},d:function(a){return a.getDate()},dd:function(a){return Ua(a.getDate())},ddd:function(a,c){return c.dayNamesShort[a.getDay()]},
dddd:function(a,c){return c.dayNames[a.getDay()]},W:function(a){return Kb(a)},M:function(a){return a.getMonth()+1},MM:function(a){return Ua(a.getMonth()+1)},MMM:function(a,c){return c.monthNamesShort[a.getMonth()]},MMMM:function(a,c){return c.monthNames[a.getMonth()]},yy:function(a){return(a.getFullYear()+"").substring(2)},yyyy:function(a){return a.getFullYear()},t:function(a){return a.getHours()<12?"a":"p"},tt:function(a){return a.getHours()<12?"am":"pm"},T:function(a){return a.getHours()<12?"A":
"P"},TT:function(a){return a.getHours()<12?"AM":"PM"},u:function(a){return Ra(a,"yyyy-MM-dd'T'HH:mm:ss'Z'")},S:function(a){a=a.getDate();if(a>10&&a<20)return"th";return["st","nd","rd"][a%10-1]||"th"}};Da.applyAll=fb;Fa.month=pc;Fa.basicWeek=qc;Fa.basicDay=rc;ob({weekMode:"fixed"});Fa.resourceDay=tc;Fa.resourceWeek=uc;Fa.resourceNextWeeks=vc;Fa.resourceMonth=wc;ob({weekMode:"fixed"});Fa.agendaWeek=yc;Fa.agendaDay=zc;ob({allDaySlot:true,allDayText:"all-day",firstHour:6,slotMinutes:30,defaultEventMinutes:120,
axisFormat:"h(:mm)tt",timeFormat:{agenda:"h:mm{ - h:mm}"},dragOpacity:{agenda:0.5},minTime:0,maxTime:24})})(jQuery);
